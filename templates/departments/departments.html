
{% extends 'base.html' %}
{% block title %} All Departments {% endblock %}
{% block body %}
  
<div class="content-section">
  <div class="outer">
    <div class="middle">
      <div class="inner">
        <h1 style="text-align:center;" class="h1">Departments</h1>
        <hr class="intro-divider">
        <div>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{{ url_for('show_employees') }}">Employees</a></li>
              <li class="breadcrumb-item active" aria-current="page">Departments</li>
            </ol>
          </nav>
        </div>
        {% if departments %}
         
         
          <div>
            <table class="table table-bordered table-hover">
              <thead class="thead-dark">
                <tr>
                  <th scope ='col' > ID </th>
                  <th scope ='col' > Name </th>
                  <th scope ='col'> Employee Count </th>
                  <th scope ='col'> Edit </th>
                  <th scope ='col'> Delete </th>
                </tr>
              </thead>
              <tbody>
              {% for department in departments %}
                <tr>
                  <th scope="row">{{department.id}}</th>
                  <td> {{ department.name }} </td>
                 
                  <td>
                    {% if department.employees %}
                      {{ department.employees.count() }}
                    {% else %}
                      0
                    {% endif %}
                  </td>
                  <td>
                    <a class="btn btn-outline-secondary" href="{{ url_for('edit_department', id=department.id) }}" role="button">
                      <i class="fa-solid fa-pen-to-square"></i> </a>
                    
                  </td>
                  <td>
                    <a class="btn btn-outline-secondary" href="{{ url_for('delete_department', id=department.id) }}" role="button"> 
                      <i class="fa-solid fa-trash-can"></i> </a>
                    
                  </td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
          <div>
        {% else %}
          <div class = "container" style="align-items: center;">
            <h3> No departments have been added. </h3>
            <hr class="intro-divider">
        {% endif %}
        <div class="col-md-12 text-center">
        <a class="btn btn-outline-secondary" href="{{ url_for('add_department') }}" role="button">Add Department</a>
         </div> 
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% endblock %}